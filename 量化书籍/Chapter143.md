# 量化实战入门143—提升投资业绩，胜率和赔率要这么用 

## 一、什么是胜率和赔率
胜率和赔率是投资领域中的两个重要概念，它们帮助投资者评估策略的有效性和潜在的盈利能力。
### 1. 胜率（Win Rate）
胜率是指在一系列交易中，获得正收益的交易所占的比例。胜率计算公式如下：

      胜率 = 盈利交易次数 / 总交易次数 ×100%


例如，如果你进行了100次交易，其中60次交易盈利，那么你的胜率是60%。
### 2. 赔率（Odds）
赔率则是指你能获得的单次收益与你可能遭受的单次损失之比。赔率的计算公式：

       赔率 = 平均每次盈利 / 平均每次亏损


例如，如果你平均每次盈利100元，而平均每次亏损50元，那么你的赔率是2。
## 二、胜率与赔率的使用
胜率反映了策略的准确性和稳定性，高胜率意味着策略能够更频繁地产生盈利交易。但胜率可能会忽略盈亏金额的大小，一个投资策略的胜率再高，如果每次盈利的金额太低，或者每次亏损的金额太高，也可能导致总体的投资收益为负。

赔率反映了策略的风险回报特征，高赔率意味着每次盈利的金额相对于每次亏损的金额更大。但赔率不考虑交易频率，因此高赔率策略可能交易次数较少。

单独看胜率或赔率都不足以评估一个投资策略的好坏。投资者需要考虑胜率和赔率的结合来评估一个策略的期望收益，计算公式如下：

         期望收益 = (胜率 × 平均每次盈利) - [(1 - 胜率) × 平均每次亏损]


这里：


(胜率 × 平均每次盈利) 表示在所有交易中，平均每一次交易预期能够带来的盈利额。


[(1 - 胜率) × 平均每次亏损] 表示在所有交易中，平均每一次交易预期会产生的亏损额。


将两者相减，就得到了平均每次交易的期望收益。如果这个值是正的，意味着交易策略预期是盈利的；如果这个值是负的，意味着策略预期是亏损的。


这个公式非常重要，因为它帮助投资者理解并评估他们的交易策略或投资决策。通过对过去的交易数据进行分析，投资者可以估计他们的胜率和赔率，然后利用这个公式来预测未来的收益情况。这是一个理论上的预期值，实际结果可能因市场波动和其他不可预测因素而有所不同。


要注意的是，即使期望收益为正，也不能保证每次交易都会盈利，因为实际交易结果会受到随机性的影响。但是，在大量交易和长时间跨度上，期望收益可以作为衡量交易表现的一个有效工具。
## 三、用python计算胜率、赔率和期望收益
我们以沪深300指数为例，讲解如何计算胜率、赔率和期望收益。
### 1. 获取基础数据
我们从AKShare数据源获取沪深300的10年收盘价数据。AKShare的接口有时会有更新，如果提示接口不存在，请参考AKShare的网站。

```python 

# 导入需要使用的库
import akshare as ak
import pandas as pd
import numpy as np
# 关闭警告信息
import warnings
warnings.filterwarnings('ignore')

# 获取沪深300指数10年的收盘价数据
start_date = '20140101'  # 开始日期
end_date = '20231229'  # 结束日期
bars = ak.stock_zh_index_hist_csindex(symbol='000300', start_date=start_date, end_date=end_date)
prices = bars[['日期','收盘']]
# 将日期设置为datetime格式
prices['日期'] = pd.to_datetime(prices['日期'])
prices = prices.set_index('日期')

```

### 2. 计算每日的收益率

```python 

# 计算日收益率
returns = prices['收盘'].pct_change()
```

### 3. 计算胜率

```python 

# 胜率 = 盈利交易次数 / 总交易次数
win_rate = (returns > 0).sum() / returns.count()
```

### 4. 计算赔率

```python 

# 赔率 = 平均每次盈利 / 平均每次亏损
avg_win = returns[returns > 0].mean()  # 平均每次盈利
avg_loss = returns[returns < 0].mean()  # 平均每次亏损
odds = abs(avg_win / avg_loss)

```

### 5. 计算期望收益

```python 

# 期望收益 = (胜率 × 平均每次盈利) - [(1 - 胜率) × 平均每次亏损]
exp_returns = (win_rate * avg_win) - ((1 - win_rate) * abs(avg_loss))

```

