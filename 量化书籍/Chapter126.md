# 量化实战入门126—成交量指标详解：PVOL / PVR / VP

本文介绍以下几个技术指标：PVOL、PVR、VP。这几个指标都是跟成交量相关的指标，成交量是衡量市场活跃程度和价格变动有效性的关键因素，它们提供了市场参与者情绪和潜在市场动向的重要线索。

本系列中的各项指标都可以通过调用 Pandas TA 库来实现，Pandas TA 库的使用详见前文《量化宝藏工具箱：技术指标库 Pandas TA 教程》。
## 1. Price-Volume（PVOL）

Price-Volume (PVOL) 是一个计算价格和交易量乘积的指标。这个指标可以反映市场对价格变动的反应力度，因此可用于分析市场趋势和动能。

指标的计算方法：
       PVOL 的计算方法是将每个时期的收盘价和交易量相乘。

如果 signed 参数为 True，那么会给 PVOL 值加上符号，价格上涨的标记为正号，价格下跌的标记为负号，价格不变的保持不变。带有符号的 PVOL 指标可以提供更丰富的市场信息，帮助投资者更好地理解市场的动态。

以下是 PVOL 指标的一些常见用法：

1）市场活跃度：

PVOL 指标可以用来衡量市场的活跃度。当 PVOL 值较高时，表示交易活动较高，市场中的资金流动频繁。反之，如果 PVOL 值较低，表示交易活动较低，市场中的资金流动较少。

2）市场趋势：

PVOL 指标也可以用来评估市场的趋势。如果 PVOL 值在上升，那么可能表明市场正在经历一个上升趋势，因为价格上涨并且交易量也在增加。如果 PVOL 值在下降，那么可能表明市场正在经历一个下降趋势，因为价格下跌且交易量也在减少。

如果带有符号的 PVOL 值持续为正，那么可能表明市场正在经历一个上升趋势，因为价格上涨并且交易量也在增加。如果带有符号的 PVOL 值持续为负，那么可能表明市场正在经历一个下降趋势，因为价格下跌并且交易量也在减少。

3）市场动能：PVOL 指标也可以用来评估市场的动能。如果 PVOL 值突然上升，可能表示市场动能强劲，预示着价格可能会进一步上涨。相反，如果 PVOL 值突然下降，可能表示市场动能减弱，预示着价格可能会进一步下跌。

如果带有符号的 PVOL 值突然由负变为正，可能表示市场动能发生了重大变化，预示着价格可能会开始上涨。相反，如果带有符号的 PVOL 值突然由正变为负，可能表示市场动能发生了重大变化，预示着价格可能会开始下跌。

该指标在 Pandas TA 库中的函数是：

```python 

pvol(close, volume, offset=None, **kwargs)

```

## 2. Price Volume Rank（成交量排名，PVR）

Price Volume Rank (PVR) 是一种简单的技术分析工具，旨在帮助投资者根据价格和交易量的变化来确定买入和卖出的时机。

PVR 的计算方法是基于每个交易日的价格变化和交易量变化进行评级：

- 如果 'close change'（收盘价变化） >= 0 并且 'volume change'（交易量变化）>= 0，则返回 1；

- 如果 'close change' >= 0 并且 'volume change' < 0，则返回 2；

- 如果 'close change' < 0 并且 'volume change' >= 0，则返回 3；

- 如果 'close change' < 0 并且 'volume change' < 0，则返回 4。

以下是 PVR 指标的一些基本使用方法：

1）买入信号：当 PVR 值低于 2.5 时，这可能是一个买入信号。这意味着价格和/或交易量的变化可能对投资者有利。具体来说，当价格上涨且交易量也上涨（PVR=1）或者价格上涨但交易量下降（PVR=2）时，可能是投资者买入的好时机。

2）卖出信号：当 PVR 值高于 2.5 时，这可能是一个卖出信号。这意味着价格和/或交易量的变化可能对投资者不利。具体来说，当价格下降且交易量上涨（PVR=3）或者价格下降且交易量也下降（PVR=4）时，可能是投资者卖出的好时机。

3）市场趋势：PVR 指标也可以用来评估市场的趋势。如果 PVR 值在变动，那么可能表明市场趋势正在改变。投资者可以通过观察 PVR 值的变化来获取关于市场趋势的信息。

该指标在 Pandas TA 库中的函数是：

```python 

pvr(close, volume)

```

## 3. Volume Profile（VP）
Volume Profile (VP) 是一种技术分析工具，它通过将价格划分为若干区间，然后计算每个区间的交易量，来帮助投资者理解价格的分布和交易活动的情况。

VP 的计算方法是通过对价格和交易量的分析，来描绘出价格和交易量在不同价格区间的分布情况。

在计算 VP 的过程中，首先要确定价格的区间。这可以通过将价格等分为若干个区间或者根据价格的分布将其划分为若干个区间来实现。在确定了价格区间之后，就可以计算每个区间的交易量了。

交易量的计算分为两部分：正交易量和负交易量。正交易量是指价格上涨时的交易量，而负交易量则是指价格下跌时的交易量。通过计算每个价格区间的正交易量和负交易量，我们就可以得到该区间内的总交易量。

在得到每个价格区间的交易量之后，我们还需要计算每个区间的价格均值，这通常是通过计算区间内所有价格的平均值来实现的。

最后，将每个价格区间的左边界、右边界、价格均值，以及正交易量、负交易量和总交易量汇总起来，就可以得到 VP 了。

通过 VP，我们可以清晰地看到在不同价格区间内，市场的交易活动是怎样的，哪些价格区间的交易量比较大，哪些价格区间的交易量比较小，从而推测出市场的支撑位和阻力位，为投资决策提供参考。

VP 的用法有：

1）确定市场的支撑和阻力位：高交易量的价格区间通常可以被认为是市场的支撑或阻力位。如果价格下跌到一个交易量较大的区间，这个区间可能会成为一个支撑位，阻止价格进一步下跌。相反，如果价格上涨到一个交易量较大的区间，这个区间可能会成为阻力位，阻止价格进一步上涨。

2）预测价格行为：当价格离开一个交易量较大的区间，并进入一个交易量较小的区间时，价格可能会快速移动，直到达到下一个交易量较大的区间。这是因为在交易量较小的区间，买卖双方的力量可能会失衡，从而导致价格快速移动。

3）识别市场的交易模式：通过观察正交易量和负交易量，可以识别出市场的交易模式。例如，如果在某个价格区间，正交易量明显多于负交易量，那么可能说明在这个区间，买方的力量强于卖方，市场可能处于多头行情。反之，则可能说明市场处于空头行情。

4）评估市场的强度：总交易量可以用来评估市场的强度。如果在价格上涨的过程中，总交易量也在增加，那么可能说明市场的上涨势头很强。反之，如果总交易量在减少，那么可能说明上涨势头减弱。

该指标在 Pandas TA 库中的函数是：

```python 

vp(close, volume, width=None, **kwargs)

```