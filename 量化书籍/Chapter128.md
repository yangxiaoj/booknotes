# 量化实战入门128—组合优化神器Riskfolio-Lib教程2：优化目标和风险度量 

在上一篇文章《投资组合优化神器Riskfolio-Lib教程1：基于历史估计的“均值-方差”优化模型》中，我们列举了用Riskfolio-Lib构建组合优化的一个例子，在这个例子中我们使用了'MV'（标准差）作为风险度量的指标，使用了'Sharpe' （最大化夏普比率）作为优化的目标函数。除此之外，Riskfolio-Lib库还支持多种风险度量指标和优化目标函数，具体介绍如下：
## 一、风险度量指标
风险度量的选择对于投资组合的构建至关重要，每种风险度量都有其独特的视角和优缺点。在实际操作中，选择哪种风险度量应考虑投资者的风险偏好、投资目标以及市场条件等因素。

Riskfolio-Lib库支持以下风险度量：
### 1. 'MV': 标准差 (Standard Deviation)
含义：标准差是衡量投资回报波动性的指标，反映了投资回报与平均回报之间的偏差程度。

特点：它是最常用的风险度量标准之一，因为计算简单并且容易理解。标准差越大，代表投资的不确定性和风险越高。

适用场景：适用于对投资组合整体波动性进行评估，特别是在假定投资回报呈正态分布的情况下更为有效。
### 2. 'MAD': 平均绝对偏差 (Mean Absolute Deviation)
含义：平均绝对偏差是指投资回报与平均值之差的绝对值的平均数，它是另一种衡量投资风险的方式。

特点：相比标准差，MAD对极端值不那么敏感，因此提供了一个更稳健的风险估计。

适用场景：当数据分布不是正态分布或者存在离群点时，MAD可以作为一种更好的风险度量方法。
### 3. 'MSV': 半方差 (Semi Standard Deviation)
含义：半方差仅衡量投资回报低于平均回报的波动性（下行波动率）。

特点：它忽略了高于平均值的波动，因为许多投资者主要关心的是损失（即负面波动）。

适用场景：对于那些对下行风险（损失）更为敏感的投资者或者策略，半方差是一个更加合适的风险度量。
### 4. 'FLPM': 一阶下偏风险 (First Lower Partial Moment，Omega Ratio)
含义：一阶下偏风险关注实际回报低于目标或基准回报的情况，它衡量的是这些负偏差的平均数。

特点：FLPM是风险度量中的非对称性度量，它仅关注不利影响。

适用场景：在计算Omega比率时特别有用，适用于对投资组合进行风险调整后的表现评估。
### 5. 'SLPM': 二阶下偏风险 (Second Lower Partial Moment，Sortino Ratio)
含义：二阶下偏风险衡量的是回报低于某一目标或基准的波动性的平方的平均，专注于下行风险。

特点：它是计算Sortino比率的关键组成部分，提供了一个对负回报波动的更加敏感的视角。

适用场景：适用于那些希望避免大幅下跌，特别关注下行风险的投资者。
### 6. 'CVaR': 条件风险价值 (Conditional Value at Risk)
含义：CVaR估计在最坏的一定比例的情况下预期的平均损失。

特点：CVaR考虑了在VaR指定的阈值以下的损失，提供了超出VaR的风险信息。

适用场景：对于对尾部风险（即极端损失）敏感的投资者或金融机构，CVaR是一个更全面的风险度量。
### 7.  'EVaR': 熵价值风险 (Entropic Value at Risk)
含义：EVaR 是一种基于熵概念的风险度量指标，它用于衡量极端风险，并且是对VaR和CVaR概念的一种扩展。

特点：EVaR 考虑了资产回报分布的所有尾部信息，而不仅仅是尾部下方的一部分。它是一个非参数化的风险度量，不需要对资产回报的分布做出正态分布等假设。

适用场景：EVaR 可以用于评估极端市场条件下的风险敞口，尤其适合于那些风险管理要求较为严格的金融机构。
### 8. 'WR': 最差实现 (Worst Realization，Minimax)
含义：WR 指的是在某个投资组合的可能回报集合中，可能发生的最坏情况。

特点：这是一种非常保守的风险度量方法，它不考虑概率，只关注最坏的结果。

适用场景：WR 特别适用于那些极为风险厌恶者，或者在进行压力测试和极端情况分析时使用。
### 9. 'MDD': 最大回撤 (Maximum Drawdown，Calmar Ratio)
含义：MDD 是指投资组合未经复合的累计回报从峰值下降到谷值的最大幅度。

特点：最大回撤是衡量投资组合潜在损失的一个直观指标，反映了投资者可能面临的最大资本损失。

适用场景：适用于评估投资组合在特定历史时期内的风险水平，常与Calmar比率联用来衡量风险调整后的表现。
### 10. 'ADD': 平均回撤 (Average Drawdown)
含义：ADD 指的是投资组合在一段时间内所有回撤的平均值。

特点：它提供了一个关于投资组合经常性损失的视角，而不仅仅是最糟糕情况。

适用场景：对于想要了解投资组合在正常市场条件下承受损失的能力的投资者，ADD 是一个有用的指标。
### 11. 'CDaR': 条件回撤风险 (Conditional Drawdown at Risk)
含义：CDaR 类似于CVaR，但它专注于回撤，即衡量在最坏的一定比例的情况下预期的平均回撤。

特点：CDaR 提供了超出最大回撤的额外信息，关注在极端情况下可能的平均回撤水平。

适用场景：对于关注回撤和希望了解极端市场条件下潜在损失的投资者，CDaR 是一个合适的指标。
### 12. 'EDaR': 熵回撤风险 (Entropic Drawdown at Risk)
含义：EDaR 是基于熵的概念，来度量可能的最大回撤。它采用统计物理学中的熵方法，来量化在特定置信水平下的潜在最大回撤。

特点：EDaR 不依赖于资产回报的分布假设，能够提供一个更全面的风险评估，它关注于投资组合在极端情况下可能的最大回撤。

适用场景：EDaR 适合于对于回撤风险敏感并且不想对回报分布做严格假设的投资者或风险管理者。
### 13. 'UCI': 溃疡指数 (Ulcer Index)
含义：溃疡指数是衡量投资组合在特定时期内回撤持续性和深度的指标，反映了市场下跌对投资者心理造成的“痛苦”或不适。

特点：UCI 关注的是回撤的深度和持续时间，而不仅仅是回撤的大小。它能够更好地衡量投资者在市场下行期间可能经历的情绪压力。

适用场景：对于关心投资组合在下行市场中表现的投资者，尤其是对市场波动敏感的长期投资者，溃疡指数是一个有用的工具。

不同的风险测量方法可能会导致非常不同的资产配置，因此，投资者在选择最适合自己的投资组合时，需要综合考虑自己的风险承受能力、投资目标以及市场条件。
## 二、优化目标
Riskfolio-Lib库支持多种优化目标，这些目标可以帮助投资者根据不同的风险偏好和投资目标来构建投资组合。下面是对这个库中主要优化目标的介绍：
### 1. 'MinRisk': 最小化选择的风险度量
这个目标函数的目的是找到使所选风险度量指标最小化的资产权重分配。这种方法适用于风险规避型投资者，他们希望在所有可能的投资组合中选择风险最小的一个。
### 2. 'Utility': 最大化效用函数
效用函数是一种尝试衡量投资组合的整体满意度的方法，通常结合了预期收益和风险的度量。这个函数的目标是找到最大化投资者满意度的资产权重分配，即在预期收益与风险之间找到最佳平衡点。
### 3. 'Sharpe': 最大化基于选择的风险度量的风险调整回报比
Sharpe比率是一种衡量单位风险所带来的超额回报的指标。这个目标函数的目的是最大化基于所选风险度量的风险调整回报。这意味着它不仅考虑投资组合的预期收益，还考虑了与之相关的风险水平。这种方法适用于寻求每承担一单位风险都获得最大回报的投资者。
### 4. 'MaxRet': 最大化投资组合的预期收益
这个目标函数专注于找到预期收益最高的投资组合，不考虑与之相关的风险。适用于风险承受能力高的投资者，他们的主要目标是资产增值，而不是风险控制。