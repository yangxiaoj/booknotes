# 从零学量化67—价值因子：从“便宜”中挖掘低估宝藏 

本篇介绍风格因子中的一个分类：价值因子。

## 01 价值因子概述
价值因子投资的核心理念源于对市场效率假说的反思，即相信存在一些被低估的“便宜股票”。这些股票的价格低于其实际价值，通常是因为大多数市场投资者可能忽视了这些公司的潜在价值，或者对公司的未来持过于悲观的看法。这种低估情况为那些深入研究并理解这些公司价值的投资者提供了独特的投资机会。他们可以在股票价格低于其实际价值时购买这些股票，然后耐心等待其价格恢复到公正的水平。

这种方式的投资逻辑是基于市场的调整机制，即市场价格最终会反映出公司的真实价值。在一段时间内，虽然某些公司的股票可能会被市场低估，但随着时间的推移和信息的逐渐揭示，这些公司的真实价值将被市场认可。这将导致这些低估的股票价格逐步升高，反映出其真实的价值。因此，通过购买这些低估的股票，投资者有望在未来获得高于市场平均水平的投资回报。

虽然价值投资看起来很直观，但实践中却充满了挑战：

首先，确定一个公司的真实价值并不容易，需要对公司的财务状况，业务模式，行业地位等进行深入的分析。

其次，即使确定了公司被低估，市场可能也需要较长时间才能意识到这一点，这就需要投资者有足够的耐心和长期的投资视野。

另外，某些股票可能会由于公司的基本面出现问题而长期被市场低估，这就需要投资者能够分辨出哪些公司的低估是暂时的，哪些公司的低估是由于公司的基本面出现了问题，否则就有可能陷入“估值陷阱”，即市场低估的股票未必具有好的投资价值，有可能是因为其内在价值出现了问题，导致股票价格一直低迷。

最后，价值因子的投资策略通常会忽略公司的成长性和创新性，有可能会错过某些高成长和高创新的公司，从而导致投资收益低于市场平均水平。

因此，虽然价值投资理论上看起来很吸引人，但实践中需要投资者有丰富的经验和深厚的专业知识。


## 02 价值因子的具体指标
价值因子的常见指标有以下一些：
### 1. 市盈率（P/E）：
市盈率是衡量股票价值的常用经济指标之一，它用于评估投资者愿意支付每单位收益的金额。市盈率是公司市值（股票价格）与其利润之间的比率，一个较低的市盈率可能意味着该股票被市场低估。
市盈率的计算公式如下：

市盈率（P/E） = 公司市值 / 净利润

公司市值通常用每股市价表示，净利润则用每股收益（EPS）表示。所以，市盈率也可以用以下公式计算：

市盈率（P/E） = 每股市价 / 每股收益（EPS）

需要注意的是，当公司的每股收益（EPS）为负数时，意味着公司在该期间产生了亏损。在这种情况下，传统的市盈率（P/E）计算将会产生负值，当分母出现负值时会出现预料之外的结果。以下是几种处理这种情况的常见方法：

1）删除市盈率为负的数据：一种简单的处理方式是直接从样本中删除市盈率为负的公司。这种方法的优点是简单明了，但缺点是减少了样本的数量。此外，这种方法也可能导致样本偏差，因为被排除的公司可能具有某些共同的特征。

2）使用市盈率的倒数（E/P）：市盈率的倒数也被称为盈利收益率，它等于每股收益（EPS）除以每股股价。这样，即使EPS为负，也可以得到一个有意义的数值。
### 2. 市净率（P/B）
市净率是指一家公司的市值与其净资产的比值，一般而言，较低的市净率意味着该公司的股票可能被低估。
市净率的计算公式如下：

市净率（P/B） = 公司市值 / 净资产

在这里，公司市值通常用每股市价表示，净资产则用每股净资产表示。所以，市净率也可以用以下公式计算：

市净率（P/B） = 每股市价 / 每股净资产

### 3. 市销率（P/S）
市销率是指一家公司的市值与其营业收入的比值，市销率特别适用于那些尚未实现盈利或盈利不稳定的公司，因为它不依赖于公司的净利润。一般而言，较低的市销率意味着该公司的股票可能被低估。
市销率的计算公式如下：

市销率（P/S） = 公司市值 / 销售收入

在这里，公司市值通常用每股市价表示，销售收入则用每股销售收入表示。所以，市销率也可以用以下公式计算：

市销率（P/S） = 每股市价 / 每股销售收入

### 4. 股息收益率（DV）
股息收益率是指一家公司每股股票分配的股息与股价的比值，这个比率表示的是，如果你购买了这家公司的股票，那么你可以从股息中获得的收益率是多少。一般而言，较高的股息收益率意味着该公司的股票可能被低估。
股息收益率的计算公式如下：

股息收益率 = 每年的股息总额 / 总市值

通常，我们会用每股股息除以每股股价来计算股息收益率，所以也可以用以下公式来计算：

股息收益率 = 每股股息 / 每股股价

### 5. 市现率（P/CF）
市现率是指一家公司的市值与其经营现金流量的比值，有时市现率比市盈率和市销率更能反映公司的真实盈利能力，因为现金流量能更好地反映公司的财务状况，而且不易受到会计准则和管理层操纵的影响。一般而言，较低的市现率意味着该公司的股票可能被低估。
市现率的计算公式如下：

市现率（P/CF） = 公司市值 / 经营现金流量

在这里，公司市值通常用每股市价表示，经营现金流量则用每股经营现金流表示。所以，市现率也可以用以下公式计算：

市现率（P/CF） = 每股市价 / 每股经营现金流

### 6. 自由现金流收益率
自由现金流收益率，它是自由现金流与市值之比。一般而言，较高的自由现金流收益率意味着公司的价值可能被低估。

自由现金流是指公司在日常经营中产生的现金流，扣除维持或扩大业务所需的资本支出后，可用于偿还债务、支付股息、回购股票或投资于新的项目的现金。

自由现金流的计算公式有多个版本，下面介绍通常用的两种方法，分别是直接法和间接法。
直接法：

自由现金流 = 经营活动产生的现金流量 - 资本支出

在这里，经营活动产生的现金流量可以在公司的现金流量表中找到，而资本支出（也称为购建固定资产和无形资产支付的现金）同样可以在现金流量表中找到。

间接法：

自由现金流 = 净利润 + 折旧和摊销 - (资本支出＋营运资本增加) + 利息支出*(1-税率)

上述数据需要根据公司的财务报告分析填列。
计算出自由现金流之后，就可以计算自由现金流收益率，计算公式如下：

自由现金流收益率 = 自由现金流 / 总市值

通常，我们会用每股自由现金流除以每股股价来计算自由现金流收益率，所以也可以用以下公式来计算：

自由现金流收益率 = 每股自由现金流 / 每股股价

### 7. PEG比率：
PEG比率是市盈率（PE）与预期收益增长率（G）的比率。这个指标将市盈率（PE）与预期收益增长率结合起来，这使得它成为了市盈率（PE）的一种改进，可以更全面地评估公司的价值。

PEG 比率的计算公式如下：

PEG比率 = 市盈率PE / 预期盈利增长率

在这个公式中，市盈率PE是每股市价除以每股收益，而预期盈利增长率通常用分析师对公司未来一年或未来几年的盈利增长的预期。

PEG 比率的值可以帮助投资者判断一家公司的股票是否被高估或低估。一般来说，如果 PEG 比率小于 1，那么这可能意味着股票被低估；如果 PEG 比率大于 1，那么这可能意味着股票被高估。当然，这并不是绝对的。

需要注意的是，PEG 比率主要适用于预期有稳定增长的公司，对于盈利波动大或增长不稳定的公司，PEG 比率可能不是一个好的评估工具。
### 8. 企业价值倍数（Enterprise Value Multiples）
企业价值倍数也称作企业倍数或EV倍数，是一种评估公司价值的方法。与以股价为基础的估值方法（比如市盈率、市销率）不同，企业价值倍数考虑了公司的整体经济价值，包括股东权益和债务，因此更能全面地反映公司的价值。

企业价值倍数的计算有多种口径，以下是一些常见的企业价值倍数和它们的计算公式：

1）EV/EBIT
计算公式为：

企业价值倍数 = 企业价值EV / EBIT

EBIT 是 Earnings Before Interest and Taxes 的缩写，意思为 "息税前利润"。EBIT 是一种反映公司运营盈利能力的指标，它排除了利息支出和税收影响，因此可以清楚地看出公司的核心业务盈利情况。EBIT 的计算公式如下：

EBIT = 营业利润 + 非营业收入 - 非营业支出

在这个公式中，营业利润是公司主营业务的收入减去成本和费用，非营业收入和非营业支出则分别是公司非主营业务的收入和支出。

2）EV/EBITDA

计算公式为：

企业价值倍数 = 企业价值EV / EBITDA

EBITDA 是 Earnings Before Interest, Taxes, Depreciation, and Amortization 的缩写，意思是 "息税折旧摊销前利润"。EBITDA 是一种反映公司现金流盈利能力的指标，它不仅排除了利息支出和税收，还排除了折旧和摊销，因此可以更准确地反映公司的现金流情况。EBITDA 的计算公式如下：

EBITDA = EBIT + 折旧 + 摊销

3）EV/Sales

这是一种比较公司的企业价值和销售收入的指标。对于那些盈利波动较大或暂时没有盈利的公司，EV/Sales 可能比 EV/EBITDA 或 EV/EBIT 更有用。计算公式为：

企业价值倍数 = 企业价值EV / 销售收入

在所有这些公式中，企业价值的计算公式通常为：

企业价值 = 市场价值（总股本 * 股价）+ 总债务 – 现金及现金等价物

这里的市场价值是公司的市场资本化（即总股本乘以股价），总债务包括长期债务和短期债务，现金及现金等价物包括公司持有的现金和可以随时转换为现金的投资（如市场上可随时买卖的短期债券）。

由于EBIT 和 EBITDA 都有可能为负数，而分母出现负数会导致意料之外的结果，因此我们常用企业价值倍数的倒数作为因子值。

### 9. 使用TTM数据还是年报数据
我们在计算上述价值因子的指标时，如果涉及到净利润、销售收入、现金流量等数据，除了可以使用最近一个年度的年报数据，还可以使用TTM数据。
TTM 是 "Trailing Twelve Months" 的缩写，中文意为 "过去十二个月"。在财务分析中，TTM 数据是指一个公司过去12个月的财务数据，包括收入、利润、现金流等。TTM 数据比季度数据或年度数据更能反映公司的近期经营状况。

在计算价值因子时，使用 TTM 数据有以下几个好处：

1）更及时：TTM 数据比最近一个年度的年报数据更能反映公司的最新财务状况，因为它包括了最近12个月的数据。这对于投资决策来说是非常重要的，因为投资者通常更关心公司的近期表现和未来前景。

2）更平滑：TTM 数据通过汇总过去12个月的数据，能够降低季度波动对财务比率的影响。这对于季度波动较大的公司来说尤其重要。

3）更全面：TTM 数据包括了一个完整的财务年度，所以它能够全面反映公司的经营状况。相比之下，季度数据只能反映公司在一段短期内的表现，可能会忽略一些季节性因素的影响。

本文介绍了价值因子的概念，并讲解了常用的价值因子。除了这些传统的价值因子指标外，对价值因子还有不少新的研究成果，比如BARRA CNE-6的因子框架中还引入了Long term relative strength（长期相对强弱）和Long term historical alpha（长期历史 alpha）等因子，并引入了分析师预测的数据，这些因子的实现稍显复杂，以后有机会再新开一篇文章讲述。

在后续文章中将对常见的价值因子进行评价。