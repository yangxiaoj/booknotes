# 量化实战入门109—动量类指标详解：TRIX / TSI / UO / WILLR 

本文介绍以下几个技术指标：TRIX、TSI、UO、WILLR。这几个指标都属于动量类型的指标。在投资中，动量指的是价格沿着一个方向前进的持续性。

本系列中的各项指标都可以通过调用 Pandas TA 库来实现，Pandas TA 库的使用详见前文《量化宝藏工具箱：技术指标库 Pandas TA 教程》。
## 1. TRIX（三重指数平滑平均线）
TRIX指标，也被称为三重指数平滑平均线，这个指标是通过计算股票价格的三次指数移动平均值，并以此来指示市场的超买或超卖状态，从而发现可能的反转点。

TRIX 计算步骤如下：

```python 

ema1 = EMA(close, length)
ema2 = EMA(ema1, length)
ema3 = EMA(ema2, length)
TRIX = 100 * ROC(ema3, drift)

```

其中，EMA是指数移动平均，ROC是变化率。

TRIX的值通常在-1到1之间，但可能会超过这个范围，具体取决于价格数据。

TRIX的主要用途在于：

1）产生交易信号：当TRIX线从下方穿过零线，这可能是一个买入信号；当TRIX线从上方穿过零线，这可能是一个卖出信号。

2）识别超买或超卖条件：如果TRIX达到极端高点，这可能表明市场过度买入；如果TRIX达到极端低点，这可能表明市场过度卖出。

3）发现背离：如果价格继续创新高（或新低），而TRIX未能创新高（或新低），这可能是一个反转信号。

该指标在 Pandas TA 库中的函数是：

```python 

trix(close, length=None, signal=None, scalar=None, drift=None, offset=None, **kwargs)

```

## 2. TSI (True Strength Index，真实强度指数)
True Strength Index（TSI，真实强度指数）是一种动量振荡器，TSI主要用于识别趋势变化、过度买入或过度卖出的条件以及价格和动量的背离。

TSI指标是基于双重平滑的价格变化。以下是计算TSI的步骤：

1）计算每日价格变动。这是今日的闭市价减去昨日的闭市价。

2）计算价格变动的指数移动平均（EMA）。通常，这个EMA的周期是25天。

3）计算步骤2中得到的EMA的EMA。这是第二次平滑，通常这个EMA的周期也是25天。

4）计算每日价格变动的绝对值的双重EMA。这是分母。

5）将步骤3的结果除以步骤4的结果，并乘以100，得到TSI值。

6）计算信号线，通常是TSI值的指数移动平均（EMA）。

TSI的值通常在-100到+100之间。

TSI指标的主要用途：

1）判断市场趋势：当TSI线上升并且大于其信号线，这被认为是上升趋势；当TSI线下降并且小于其信号线，这被认为是下降趋势。

2）产生交易信号：当TSI线从下方穿过其信号线，这可能是一个买入信号；当TSI线从上方穿过其信号线，这可能是一个卖出信号。

3）识别过度买入或过度卖出的条件：当TSI线达到过高或过低的水平时，可能表示市场的过度买入或过度卖出状态。

4）发现价格和动量的背离：如果价格创新高（或新低），而TSI未能创新高（或新低），这可能预示着趋势反转。

该指标在 Pandas TA 库中的函数是：

```python 

tsi(close, fast=None, slow=None, signal=None, scalar=None, mamode=None, drift=None, offset=None, **kwargs)

```
## 3. UO (Ultimate Oscillator，终极振荡器)

振荡器（Oscillator）是一种常见的动量指标，它可以通过衡量资产价格的动量或速度来预测未来的市场走势。称为“振荡器”的原因在于这类指标的数值通常围绕某个中心点或者区间“振荡”或波动。

Ultimate Oscillator（UO，终极振荡器）是一种动量振荡器，不同于大多数振荡器主要关注一个时间周期的价格行为，UO结合了长、中、短三个时间周期的价格数据，旨在捕捉多个时间尺度上的动量变化。

UO的计算方法相对复杂，涉及到以下步骤：

1）对每个时间周期（通常是7、14、28日），计算购买压力和真实范围，然后得到其比值。

2）对每个时间周期的比值乘以相应的权重（通常是4、2、1），然后求和。

3）对每个时间周期的真实范围乘以相应的权重，然后求和。

4）将步骤2的结果除以步骤3的结果，然后乘以100，得到UO值。

UO的值通常在0到100之间。

以下是UO指标的主要用途：

1）判断市场趋势：UO大于50通常被认为是上升趋势，而UO小于50通常被认为是下降趋势。

2）识别过度买入或过度卖出的条件：虽然UO没有固定的过度买入或过度卖出界限，但一些交易者可能会设定自己的界限，比如70为过度买入，30为过度卖出。

3）背离：如果市场创新高，但UO未能创新高，这可能是一个卖出信号；如果市场创新低，但UO未能创新低，这可能是一个买入信号。

该指标在 Pandas TA 库中的函数是：

```python 

uo(high, low, close, fast=None, medium=None, slow=None, fast_w=None, medium_w=None, slow_w=None, talib=None, drift=None, offset=None, **kwargs)

```

## 4. WILLR (William's Percent R)
William's Percent Range（WILLR）是一个动量指标，用于测量过去N天的高价、低价和收盘价之间的关系。

WILLR的计算方法如下：

```python 

WILLR = 100 * ((close - LL) / (HH - LL) - 1)

```

其中，“HH”是过去N天的最高价，而“LL”是过去N天的最低价。N通常设为14。

WILLR的值通常在0到100之间，

以下是WILLR指标的主要用途：

1）识别超买和超卖条件：WILLR值在80以上通常被视为超买，这意味着价格可能会下跌。WILLR值在20以下通常被视为超卖，这意味着价格可能会上涨。

2）产生交易信号：当WILLR线从超卖区域（20以下）上穿20线，这可能是一个买入信号；当WILLR线从超买区域（80以上）下穿80线，这可能是一个卖出信号。

3）发现价格和动量的背离：如果价格创新高（或新低），而WILLR未能创新高（或新低），这可能预示着趋势反转。

4）需要注意的是，WILLR在强势或弱势市场中可能会持续处于超买或超卖区域，因此仅仅依赖WILLR的超买或超卖信号可能不够准确。

该指标在 Pandas TA 库中的函数是：

```python 

willr(high, low, close, length=None, talib=None, offset=None, **kwargs)

```