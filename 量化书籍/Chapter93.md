# 从零学量化93—动量类指标详解：AO / APO / Bias / BOP / BRAR 

本文介绍以下几个技术指标：AO、APO、Bias、BOP、BRAR。这几个指标都属于动量类型的指标。在投资中，动量指的是价格沿着一个方向前进的持续性。

振荡器（Oscillator）是一种常见的动量指标，它可以通过衡量资产价格的动量或速度来预测未来的市场走势。称为“振荡器”的原因在于这类指标的数值通常围绕某个中心点或者区间“振荡”或波动。振荡器指标可以分为两大类：

1）界限振荡器（Bounded Oscillator）：这类振荡器的值通常被限制在一个固定的范围内，比如0到100。当读数接近上限时，市场可能处于过度买入状态，可能会出现价格回落；当读数接近下限时，市场可能处于过度卖出状态，可能会出现价格反弹。

2）非界限振荡器（Unbounded Oscillator）：这类振荡器没有固定的最大值和最小值，但它的数值仍然会围绕某个值上下波动，反映出价格动量的变化。

本系列中的各项指标都可以通过调用 Pandas TA 库来实现，Pandas TA 库的使用详见《量化宝藏工具箱：技术指标库 Pandas TA 教程》一文。

## 1. AO（Awesome Oscillator，Awesome震荡器）

AO 指标通过计算特定周期内的中间价（最高价和最低价的平均值）的移动平均来生成振荡值。AO 指标主要用于评估市场动量和可能的趋势反转。
AO的计算方法如下：

```python 

# 1. 计算中位数：
median = (high + low) / 2
# 2. 计算AO：
AO = SMA(median, fast) - SMA(median, slow)

```

其中，SMA代表简单移动平均。

AO 指标的使用方法

1）零线交叉：当 AO 从负值上升穿过零线，这可能是买入的信号，因为这可能预示着上升的市场动量。反之，当 AO 从正值下跌穿过零线，这可能是卖出的信号，因为这可能预示着下降的市场动量。

2）峰谷交叉：当 AO 形成一系列上升的峰和谷，这可能预示着上升趋势。反之，当 AO 形成一系列下降的峰和谷，这可能预示着下降趋势。

3）背离：如果价格形成新高或新低，但 AO 没有形成新高或新低，这可能是一个反转信号。这被称为 "背离"，并且通常在趋势末期出现。

该指标在 Pandas TA 库中的函数是：

```python 

ao(high, low, fast=None, slow=None, offset=None, **kwargs)
```

## 2. APO（Absolute Price Oscillator，绝对价格震荡器）

APO是一种用于测量证券动量的指标。它简单地表示两个不同周期的移动平均线之间的差异。注意，当移动平均线选择EMA时，APO和MACD线是等价的。

APO的计算方法如下：

```python 

APO = MA(close, fast) - MA(close, slow)

```

其中，MA代表移动平均，可以是简单移动平均线 (SMA) 或者指数移动平均线 (EMA)。在许多情况下，APO 指标使用的是 12 期和 26 期的MA。

APO 的使用方法：

1）上升和下降：当APO上升，表明上升趋势正在加强；当APO下降，表明下降趋势正在加强。

2）零线交叉：当 APO 从下方上穿过零线，这可能是一个买入信号，因为这可能预示着市场趋势的上升。反之，当 APO 从上方下穿过零线，这可能是一个卖出信号，因为这可能预示着市场趋势的下降。

3）背离和反向运动：当价格和 APO 指标出现背离（即价格创新高或新低，但 APO 指标没有同步创新高或新低）或者反向运动（即价格下降或上升，但 APO 指标反方向运动）时，这可能预示着即将发生的趋势反转。

该指标在 Pandas TA 库中的函数是：

```python 

apo(close, fast=None, slow=None, mamode=None, talib=None, offset=None, **kwargs)

```

## 3. Bias（偏离率）

Bias 指标用于计算偏离率，即源数据与移动平均之间的变化率。正偏离率意味着当前价格高于平均水平；负偏离率意味着当前价格低于平均水平。

偏离率的计算公式如下：

```python 

BIAS = (close - MA(close, length)) / MA(close, length)

```

或者：

```python 

BIAS = (close / MA(close, length)) - 1

```
Bias 指标的使用方法：

1）零线交叉：当 Bias 从下方上穿过零线，这可能是一个买入信号，因为这可能预示着价格即将上涨。反之，当 Bias 从上方下穿过零线，这可能是一个卖出信号，因为这可能预示着价格即将下跌。

2）过度买入和过度卖出：如果 Bias 指标达到特定的高水平，这可能表明市场过度买入，价格可能会下跌。反之，如果 Bias 指标达到特定的低水平，这可能表明市场过度卖出，价格可能会反弹。

3）发散：如果股价在创新高或新低，而 Bias 指标没有同步创新高或新低，这可能预示着市场趋势即将反转。
该指标在 Pandas TA 库中的函数是：

```python 

bias(close, length=None, mamode=None, offset=None, **kwargs)
```

## 4. BOP（Balance of Power，平衡力指标）
BOP指标用于衡量市场买方和卖方的力量对比。

BOP指标的计算公式如下：

```python 

BOP = (close - open) / (high - low)

```

BOP的使用方法：

1）力量对比：BOP可以用来比较买方和卖方的力量。如果BOP为正，表示买方力量较大，市场可能处于上涨趋势；如果BOP为负，表示卖方力量较大，市场可能处于下跌趋势。

2）发现转折点：如果BOP从正数变为负数，可能是一个卖出信号；如果BOP从负数变为正数，可能是一个买入信号。

3）发现背离：如果价格走势与BOP走势出现背离，可能预示着市场即将发生转折。例如，如果价格创新高，但BOP没有创新高，可能预示着上涨趋势即将结束。

该指标在 Pandas TA 库中的函数是：

```python 

bop(open_, high, low, close, scalar=None, talib=None, offset=None, **kwargs)
```

## 5. BRAR

BRAR 指标全称为“人气意愿指标”。该指标由两个部分构成，分别为BR(相对净资金流入率)和AR(人气意愿比率)，可以反映出市场的人气和资金流向。

BR（相对净资金流入率）是通过比较股价上涨日和下跌日的成交额来度量资金流入和流出的情况，计算公式如下：

```python 

BR = ∑(H - Yesterday's C) / ∑(Yesterday's C - L)

```

其中：

- H 是上涨日的最高价
  
- Yesterday's C 是昨日收盘价

- L 是下跌日的最低价

- ∑表示在计算周期内的求和

AR（人气意愿比率）是用开盘价高于前一交易日收盘价的天数，与开盘价低于前一交易日收盘价的天数之比，来反映市场的情绪，计算公式如下：

```python 

AR = ∑(H - O) / ∑(O - L)

```

其中：

- H 是当日最高价

- O 是当日开盘价

- L 是当日最低价

- ∑表示在计算周期内的求和

BRAR指标使用方法

BRAR指标反映的是市场的情绪和资金流向，可以用来判断市场的强弱和可能的趋势转变：

1）当AR值较高，BR值也较高时，说明市场人气旺盛，资金流入较多，市场处于强势。

2）当AR值较高，BR值较低时，说明市场人气虽好，但资金流入不充分，市场可能转弱。

3）当AR值较低，BR值较高时，说明市场人气不旺，但资金流入充足，市场可能转强。

4）当AR值较低，BR值也较低时，说明市场人气低落，资金流出较多，市场处于弱势。

该指标在 Pandas TA 库中的函数是：

```python 

brar(open_, high, low, close, length=None, scalar=None, drift=None, offset=None, **kwargs)

```